# NOTE: If a new job is added, be sure to upate .gitlab/e2e_test_junit_upload.yml

.new-e2e_windows_msi:
  variables:
    TARGETS: ./tests/windows/install-test
    TEAM: windows-agent
  rules:
    - !reference [.on_windows_installer_changes_or_manual]

# Agent 6
.new-e2e_windows_a6_x86_64:
  variables:
    WINDOWS_AGENT_ARCH: "x86_64"
  needs: ["windows_msi_x64-a6"]

new-e2e-windows-agent-msi-windows-server-a6-x86_64:
  stage: kitchen_testing
  extends:
    - .new_e2e_template
    - .new-e2e_windows_msi
    - .new-e2e_windows_a6_x86_64
    - .new-e2e_agent_a6
  rules:
    - !reference [.on_deploy_a6]

# Agent 7
.new-e2e_windows_a7_x86_64:
  variables:
    WINDOWS_AGENT_ARCH: "x86_64"
  needs: ["windows_msi_and_bosh_zip-x64-a7"]

new-e2e-windows-agent-msi-windows-server-a7-x86_64:
  stage: kitchen_testing
  extends:
    - .new_e2e_template
    - .new-e2e_windows_msi
    - .new-e2e_windows_a7_x86_64
    - .new-e2e_agent_a7
  rules:
    - !reference [.on_default_new-e2e_tests_a7]